<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Space - Nail Charms & Jewelry</title>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;500;600;700&family=Playfair+Display:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background-color: #FDE8F0;
            color: #4A1259;
            font-family: 'Quicksand', sans-serif;
            overflow-x: hidden;
            line-height: 1.6;
        }

        h1, h2, h3, .quote-text, .page-title {
            font-family: 'Playfair Display', serif;
        }

        /* ===== MAIN LAYOUT ===== */
        .container {
            width: 100%;
            min-height: 100vh;
            position: relative;
        }

        /* ===== HEADER ===== */
        .header {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 100;
        }

        .site-logo {
            background: rgba(0, 0, 0, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(0, 0, 0, 0.1);
            border-radius: 50px;
            padding: 12px 24px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
        }

        .site-name {
            font-size: 18px;
            font-weight: 600;
            color: #4A1259;
        }

        .site-tagline {
            font-size: 11px;
            color: #F699CD;
            letter-spacing: 0.5px;
        }

        /* ===== NAVIGATION ===== */
        .nav-container {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 100;
        }

        .nav-bar {
            background: rgba(74, 18, 89, 0.06);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(74, 18, 89, 0.12);
            border-radius: 50px;
            padding: 12px 16px;
            display: flex;
            gap: 12px;
        }

        .nav-btn {
            background: transparent;
            color: #F699CD;
            border: none;
            padding: 8px 16px;
            border-radius: 50px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s ease;
            font-family: 'Quicksand', sans-serif;
            display: flex;
            align-items: center;
            gap: 8px;
            min-width: fit-content;
        }

        .nav-btn:hover {
            color: #4A1259;
            transform: scale(1.05);
        }

        .nav-btn:active {
            transform: scale(0.98);
        }

        .nav-btn.active {
            background: rgba(246, 153, 205, 0.15);
            color: #4A1259;
        }

        .nav-text {
            white-space: nowrap;
            transition: opacity 0.3s ease;
        }

        .nav-icon {
            width: 18px;
            height: 18px;
            flex-shrink: 0;
            transition: opacity 0.3s ease;
        }

        .nav-bar.collapsed {
            padding: 8px 12px;
            border-radius: 50px;
        }

        .nav-bar.collapsed .nav-text {
            display: none;
        }

        .nav-bar.collapsed .nav-btn {
            padding: 8px;
        }

        /* ===== PAGE SECTIONS ===== */
        .page {
            display: none;
            min-height: 100vh;
            opacity: 0;
            transition: opacity 0.4s ease;
            animation: fadeIn 0.4s ease;
        }

        .page.active {
            display: block;
            opacity: 1;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* ===== CUSTOM CURSOR TRAIL ===== */
        .cursor-trail {
            position: fixed;
            width: 8px;
            height: 8px;
            background: radial-gradient(circle, rgba(246, 153, 205, 0.8), rgba(246, 153, 205, 0.3));
            border-radius: 50%;
            pointer-events: none;
            z-index: 9999;
            opacity: 0;
            box-shadow: 0 0 10px rgba(246, 153, 205, 0.5);
        }

        /* ===== HOME PAGE - EDITORIAL LANDING ===== */
        .home-page .quote-section {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 60px 40px;
            position: relative;
            overflow: hidden;
        }

        .quote-issue {
            font-size: 11px;
            letter-spacing: 2px;
            text-transform: uppercase;
            color: #F699CD;
            margin-bottom: 30px;
            font-weight: 600;
        }

        .quote-divider {
            width: 40px;
            height: 1px;
            background: linear-gradient(90deg, transparent, #F699CD, transparent);
            margin: 20px auto;
        }

        /* Watermark text behind quote */
        .home-page .quote-section::before {
            content: 'SPARKLE';
            position: absolute;
            font-size: 300px;
            font-weight: 900;
            color: rgba(246, 153, 205, 0.08);
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 0;
            white-space: nowrap;
            pointer-events: none;
            font-family: 'Playfair Display', serif;
            letter-spacing: 20px;
        }

        /* Dramatic glow behind quote */
        .home-page .quote-section::after {
            content: '';
            position: absolute;
            width: 600px;
            height: 600px;
            background: radial-gradient(circle, rgba(246,153,205,0.3) 0%, rgba(246,153,205,0.15) 30%, transparent 70%);
            border-radius: 50%;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            pointer-events: none;
            animation: softPulse 6s ease-in-out infinite;
            z-index: 0;
        }

        @keyframes softPulse {
            0%, 100% { opacity: 0.6; transform: translate(-50%, -50%) scale(1); }
            50% { opacity: 1; transform: translate(-50%, -50%) scale(1.2); }
        }

        /* Sparkle overlay for 80s glam */
        @keyframes twinkle {
            0%, 100% { opacity: 0; transform: scale(0.5); }
            50% { opacity: 1; transform: scale(1); }
        }

        .sparkle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: #F699CD;
            border-radius: 50%;
            box-shadow: 0 0 6px 2px rgba(246,153,205,0.6);
            pointer-events: none;
            animation: twinkle 3s ease-in-out infinite;
        }

        .sparkle.gold {
            background: #FFD700;
            box-shadow: 0 0 8px 2px rgba(255,215,0,0.6);
        }

        /* Mouse-follow glow effect */
        .mouse-glow {
            position: fixed;
            width: 200px;
            height: 200px;
            background: radial-gradient(circle, rgba(246, 153, 205, 0.2), transparent);
            border-radius: 50%;
            pointer-events: none;
            z-index: -1;
            filter: blur(40px);
        }

        /* Word-by-word text animation */
        @keyframes wordReveal {
            0% {
                opacity: 0;
                transform: translateY(20px);
            }
            100% {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .quote-word {
            display: inline;
            animation: wordReveal 0.6s ease-out forwards;
            animation-fill-mode: both;
        }

        .quote-text {
            font-size: clamp(36px, 5vw, 56px);
            font-weight: 400;
            color: #4A1259;
            max-width: 900px;
            line-height: 1.4;
            letter-spacing: -0.5px;
            font-style: italic;
            position: relative;
            z-index: 1;
            margin-bottom: 20px;
        }

        .quote-author {
            font-size: 14px;
            color: #F699CD;
            letter-spacing: 1px;
            text-transform: uppercase;
            position: relative;
            z-index: 1;
        }

        /* ===== HOME PAGE - MAGAZINE GRID ===== */
        .home-content {
            padding: 100px 40px 40px;
            position: relative;
            z-index: 1;
        }

        .cards-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 40px;
            padding-bottom: 40px;
        }

        .card-item {
            display: flex;
            flex-direction: column;
            gap: 20px;
            opacity: 0;
            transform: translateY(40px);
            transition: all 0.6s ease;
        }

        .card-item.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .card-item:hover {
            transform: translateY(-10px);
        }

        .card-number {
            font-size: 80px;
            font-weight: 700;
            color: rgba(246, 153, 205, 0.15);
            line-height: 1;
            font-family: 'Playfair Display', serif;
            align-self: flex-start;
        }

        .card-content {
            flex: 1;
        }

        .card-image {
            width: 100%;
            height: 250px;
            border-radius: 20px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: rgba(255, 255, 255, 0.7);
            font-size: 13px;
            font-weight: 500;
            letter-spacing: 1px;
            position: relative;
            overflow: hidden;
            box-shadow: 0 8px 32px rgba(246,153,205,0.2), 0 0 60px rgba(246,153,205,0.08);
            backdrop-filter: blur(2px);
            perspective: 1000px;
            transition: all 0.4s ease;
        }

        .card-item:hover .card-image {
            transform: perspective(1000px) rotateX(5deg) rotateY(-5deg);
            box-shadow: 0 16px 48px rgba(246,153,205,0.3), 0 0 80px rgba(246,153,205,0.12);
        }

        /* Glass morphism effect for cards */
        .card-image {
            background-color: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        /* 80s glam gradient overlays for cards */
        .card-image::after {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(135deg, rgba(246,153,205,0.15) 0%, transparent 60%);
            pointer-events: none;
            border-radius: 20px;
        }

        .card-image.glam-1 { background: linear-gradient(135deg, rgba(249,168,212,0.3) 0%, rgba(192,132,252,0.3) 50%, rgba(244,114,182,0.3) 100%); }
        .card-image.glam-2 { background: linear-gradient(135deg, rgba(251,191,36,0.3) 0%, rgba(244,114,182,0.3) 50%, rgba(167,139,250,0.3) 100%); }
        .card-image.glam-3 { background: linear-gradient(135deg, rgba(232,121,249,0.3) 0%, rgba(251,146,60,0.3) 50%, rgba(249,168,212,0.3) 100%); }
        .card-image.glam-4 { background: linear-gradient(135deg, rgba(192,132,252,0.3) 0%, rgba(249,168,212,0.3) 50%, rgba(253,230,138,0.3) 100%); }
        .card-image.glam-5 { background: linear-gradient(135deg, rgba(244,114,182,0.3) 0%, rgba(251,191,36,0.3) 50%, rgba(192,132,252,0.3) 100%); }

        .card-title {
            font-size: 24px;
            font-weight: 600;
            margin-bottom: 8px;
            font-family: 'Playfair Display', serif;
        }

        .card-subtitle {
            font-size: 14px;
            color: #F699CD;
            font-weight: 500;
        }

        /* ===== THOUGHTS PAGE ===== */
        .page-title {
            font-size: clamp(36px, 6vw, 56px);
            font-weight: 700;
            margin-bottom: 16px;
        }

        .page-subtitle {
            font-size: 16px;
            color: #F699CD;
            margin-bottom: 60px;
            max-width: 600px;
        }

        .thoughts-content {
            padding: 100px 40px 40px;
        }

        .thoughts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 24px;
            margin-bottom: 60px;
        }

        .thought-card {
            background: #ffffff;
            border: 1px solid rgba(246, 153, 205, 0.25);
            border-radius: 16px;
            padding: 40px;
            min-height: 200px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            transition: all 0.3s ease;
            cursor: pointer;
            perspective: 1000px;
            opacity: 0;
            animation: slideUpIn 0.5s ease-out forwards;
        }

        @keyframes slideUpIn {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .thought-card:hover {
            background: rgba(74, 18, 89, 0.08);
            border-color: rgba(246, 153, 205, 0.3);
            transform: translateY(-4px) perspective(1000px) rotateX(3deg);
            box-shadow: 0 8px 24px rgba(74, 18, 89, 0.1);
        }

        .thought-text {
            font-size: 16px;
            font-style: italic;
            color: #4A1259;
            letter-spacing: 0.3px;
            line-height: 1.6;
        }

        /* ===== MOODBOARD PAGE (SHOP) ===== */
        .moodboard-content {
            padding: 100px 40px 40px;
            position: relative;
            min-height: 100vh;
        }

        .filter-bar {
            display: flex;
            justify-content: center;
            gap: 12px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .filter-btn {
            background: #ffffff;
            color: #4A1259;
            border: 2px solid rgba(246, 153, 205, 0.5);
            padding: 10px 18px;
            border-radius: 50px;
            cursor: pointer;
            font-size: 13px;
            font-weight: 500;
            transition: all 0.3s ease;
            font-family: 'Quicksand', sans-serif;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .filter-btn:hover {
            border-color: rgba(246, 153, 205, 0.6);
            transform: scale(1.05);
        }

        .filter-btn:active {
            transform: scale(0.95);
        }

        .filter-btn.active {
            background: #4A1259;
            color: #FDE8F0;
            border-color: #4A1259;
            box-shadow: 0 2px 12px rgba(74, 18, 89, 0.3);
        }

        .filter-icon {
            width: 14px;
            height: 14px;
            flex-shrink: 0;
        }

        .bubbles-container {
            position: relative;
            width: 100%;
            height: 800px;
            margin-top: 60px;
        }

        .bubble.hidden {
            display: none;
        }

        .bubble {
            position: absolute;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: transform 0.3s ease;
            overflow: hidden;
            box-shadow: 0 4px 20px rgba(74, 18, 89, 0.2);
        }

        .bubble.bubble-charm {
            background:
                radial-gradient(circle at 30% 25%, rgba(255,255,255,0.6) 0%, transparent 40%),
                conic-gradient(from 0deg at 50% 50%,
                    rgba(255,180,200,0.15), rgba(180,200,255,0.15),
                    rgba(200,255,220,0.15), rgba(255,220,180,0.15),
                    rgba(255,180,200,0.15)
                ),
                rgba(255,255,255,0.1);
            border: 1px solid rgba(255,255,255,0.35);
            box-shadow: 0 0 15px rgba(246,153,205,0.15), inset 0 0 20px rgba(255,255,255,0.2);
            backdrop-filter: blur(2px);
            animation: soapBubbleShimmer 5s linear infinite;
        }

        @keyframes soapBubbleShimmer {
            0% { background-image:
                radial-gradient(circle at 30% 25%, rgba(255,255,255,0.6) 0%, transparent 40%),
                conic-gradient(from 0deg at 50% 50%,
                    rgba(255,180,200,0.15), rgba(180,200,255,0.15),
                    rgba(200,255,220,0.15), rgba(255,220,180,0.15),
                    rgba(255,180,200,0.15)
                );
            }
            100% { background-image:
                radial-gradient(circle at 30% 25%, rgba(255,255,255,0.6) 0%, transparent 40%),
                conic-gradient(from 360deg at 50% 50%,
                    rgba(255,180,200,0.15), rgba(180,200,255,0.15),
                    rgba(200,255,220,0.15), rgba(255,220,180,0.15),
                    rgba(255,180,200,0.15)
                );
            }
        }

        .bubble.bubble-jewelry {
            /* Background set by JS canvas diamond pattern */
            background-size: cover !important;
            background-position: center !important;
            border: 1px solid rgba(255,255,255,0.8);
            box-shadow:
                0 0 30px rgba(255,255,255,0.6),
                0 0 60px rgba(200,220,255,0.3),
                0 0 10px rgba(246,153,205,0.15),
                inset 0 0 15px rgba(255,255,255,0.3);
            border-radius: 50%;
            animation: diamondGlow 3s ease-in-out infinite;
        }

        @keyframes diamondGlow {
            0%, 100% { box-shadow: 0 0 30px rgba(255,255,255,0.6), 0 0 60px rgba(200,220,255,0.3), 0 0 10px rgba(246,153,205,0.15), inset 0 0 15px rgba(255,255,255,0.3); }
            50% { box-shadow: 0 0 45px rgba(255,255,255,0.85), 0 0 90px rgba(200,220,255,0.45), 0 0 20px rgba(246,153,205,0.25), inset 0 0 25px rgba(255,255,255,0.5); }
        }

        /* Diamond fire: rotating prismatic rainbow overlay */
        .bubble.bubble-jewelry::after {
            content: '';
            position: absolute;
            inset: 0;
            border-radius: 50%;
            background:
                /* Specular highlight */
                radial-gradient(circle at 35% 32%, rgba(255,255,255,0.5) 0%, transparent 20%),
                /* Rotating prismatic fire colors */
                conic-gradient(from 0deg,
                    rgba(255,200,100,0.15) 0deg, transparent 20deg,
                    rgba(100,180,255,0.18) 45deg, transparent 65deg,
                    rgba(255,100,160,0.14) 90deg, transparent 110deg,
                    rgba(100,255,200,0.15) 135deg, transparent 155deg,
                    rgba(180,100,255,0.14) 180deg, transparent 200deg,
                    rgba(255,200,100,0.15) 225deg, transparent 245deg,
                    rgba(100,180,255,0.18) 270deg, transparent 290deg,
                    rgba(255,100,160,0.14) 315deg, transparent 335deg,
                    transparent 360deg
                );
            z-index: 1;
            pointer-events: none;
            animation: diamondFireRotate 7s linear infinite;
            mix-blend-mode: screen;
        }

        @keyframes diamondFireRotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .bubble::before {
            content: '';
            position: absolute;
            inset: 0;
            background: radial-gradient(circle at 30% 30%, rgba(255,255,255,0.1), transparent);
            border-radius: inherit;
        }

        .bubble:hover {
            transform: scale(1.1);
        }

        .bubble-content {
            position: relative;
            z-index: 2;
            text-align: center;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s ease;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .bubble:hover .bubble-content {
            opacity: 1;
        }

        .bubble-name {
            font-size: 14px;
            font-weight: 600;
            color: #ffffff;
            max-width: 90%;
            word-wrap: break-word;
        }

        .bubble-price {
            font-size: 16px;
            font-weight: 700;
            color: #ffd700;
        }

        /* Pop Away animation for charms */
        @keyframes popAway {
            0% {
                transform: scale(1);
                opacity: 1;
            }
            100% {
                transform: scale(0);
                opacity: 0;
            }
        }

        .bubble.pop-away {
            animation: popAway 0.4s ease-out forwards !important;
        }

        /* Glimmer Away animation for diamonds */
        @keyframes shimmerDissolve {
            0% {
                opacity: 1;
                filter: brightness(1);
            }
            50% {
                filter: brightness(2) drop-shadow(0 0 20px rgba(255,255,255,0.8));
            }
            100% {
                opacity: 0;
                filter: brightness(1) drop-shadow(0 0 0px transparent);
            }
        }

        .bubble.glimmer-away {
            animation: shimmerDissolve 0.6s ease-out forwards !important;
        }

        /* Appear animation for new bubbles */
        @keyframes bubbleAppear {
            0% {
                transform: scale(0);
                opacity: 0;
            }
            70% {
                transform: scale(1.05);
            }
            100% {
                transform: scale(1);
                opacity: 1;
            }
        }

        .bubble.appear {
            animation: bubbleAppear 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) forwards !important;
        }

        @keyframes float1 {
            0%, 100% { transform: translateY(0px) translateX(0px); }
            33% { transform: translateY(-20px) translateX(10px); }
            66% { transform: translateY(-10px) translateX(-15px); }
        }

        @keyframes float2 {
            0%, 100% { transform: translateY(0px) translateX(0px); }
            33% { transform: translateY(-30px) translateX(-20px); }
            66% { transform: translateY(-5px) translateX(25px); }
        }

        @keyframes float3 {
            0%, 100% { transform: translateY(0px) translateX(0px); }
            33% { transform: translateY(-15px) translateX(25px); }
            66% { transform: translateY(-25px) translateX(-10px); }
        }

        @keyframes float4 {
            0%, 100% { transform: translateY(0px) translateX(0px); }
            33% { transform: translateY(-35px) translateX(-15px); }
            66% { transform: translateY(-10px) translateX(20px); }
        }

        .bubble.float1 { animation: float1 8s ease-in-out infinite; }
        .bubble.float2 { animation: float2 10s ease-in-out infinite; }
        .bubble.float3 { animation: float3 12s ease-in-out infinite; }
        .bubble.float4 { animation: float4 14s ease-in-out infinite; }

        /* ===== THINGS I BUY PAGE (MOODBOARD) ===== */
        .things-content {
            padding: 100px 40px 40px;
        }

        .items-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 24px;
            margin-bottom: 60px;
        }

        .item-card {
            border-radius: 16px;
            overflow: hidden;
            transition: all 0.3s ease;
            cursor: pointer;
            opacity: 0;
            animation: slideUpIn 0.6s ease-out forwards;
        }

        .item-image {
            width: 100%;
            height: 200px;
            background: linear-gradient(135deg, #06b6d4, #0ea5e9);
            display: flex;
            align-items: center;
            justify-content: center;
            color: rgba(74, 18, 89, 0.25);
            font-size: 12px;
            transition: all 0.3s ease;
        }

        .item-info {
            background: rgba(74, 18, 89, 0.06);
            border: 1px solid rgba(74, 18, 89, 0.12);
            padding: 20px;
            border-top: none;
            transition: all 0.3s ease;
        }

        .item-title {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .item-description {
            font-size: 13px;
            color: #F699CD;
            line-height: 1.5;
        }

        .item-card:hover .item-image {
            filter: brightness(1.15);
            transform: scale(1.05);
        }

        .item-card:hover .item-info {
            transform: translateY(-4px);
            background: rgba(74, 18, 89, 0.12);
        }

        /* ===== RESEARCH PAGE ===== */
        .research-content {
            padding: 100px 40px 40px;
            position: relative;
        }

        .research-background {
            position: absolute;
            top: 80px;
            left: 40px;
            font-size: 180px;
            font-weight: 700;
            color: rgba(0, 0, 0, 0.05);
            line-height: 1;
            z-index: 0;
            pointer-events: none;
            overflow: hidden;
            max-width: 90%;
            word-break: break-word;
            animation: subtleScroll 20s linear infinite;
        }

        @keyframes subtleScroll {
            0%, 100% { transform: translateX(0); }
            50% { transform: translateX(20px); }
        }

        .research-foreground {
            position: relative;
            z-index: 1;
        }

        .research-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 24px;
            margin-bottom: 60px;
        }

        .research-card {
            border-radius: 16px;
            overflow: hidden;
            transition: all 0.3s ease;
            cursor: pointer;
            display: flex;
            flex-direction: column;
            opacity: 0;
            animation: slideUpIn 0.5s ease-out forwards;
        }

        .research-image {
            width: 100%;
            height: 200px;
            background: linear-gradient(135deg, #f59e0b, #f97316);
            display: flex;
            align-items: center;
            justify-content: center;
            color: rgba(74, 18, 89, 0.25);
            font-size: 12px;
            transition: all 0.3s ease;
        }

        .research-info {
            background: rgba(74, 18, 89, 0.06);
            border: 1px solid rgba(74, 18, 89, 0.12);
            padding: 20px;
            flex: 1;
            display: flex;
            flex-direction: column;
            transition: all 0.3s ease;
        }

        .research-title {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 8px;
            flex: 1;
        }

        .research-link {
            font-size: 12px;
            color: #F699CD;
            text-decoration: none;
            transition: color 0.3s ease;
        }

        .research-card:hover {
            box-shadow: 0 8px 24px rgba(74, 18, 89, 0.15);
            transform: translateY(-8px);
        }

        .research-card:hover .research-image {
            filter: brightness(1.1);
        }

        .research-card:hover .research-link {
            color: #4A1259;
        }

        /* ===== MODAL ===== */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            transition: opacity 0.3s ease;
            backdrop-filter: blur(4px);
        }

        .modal-overlay.active {
            display: flex;
            opacity: 1;
        }

        .modal {
            background: #FFF0F7;
            border: 1px solid rgba(74, 18, 89, 0.12);
            border-radius: 20px;
            padding: 40px;
            max-width: 500px;
            width: 90%;
            position: relative;
            animation: slideUp 0.4s ease;
            backdrop-filter: blur(10px);
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }

        @keyframes slideUp {
            from {
                transform: translateY(50px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .modal-close {
            position: absolute;
            top: 20px;
            right: 20px;
            background: transparent;
            border: none;
            color: #F699CD;
            font-size: 28px;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
        }

        .modal-close:hover {
            color: #4A1259;
            background: rgba(246, 153, 205, 0.1);
            transform: rotate(90deg);
        }

        .modal-image {
            width: 100%;
            height: 300px;
            background: linear-gradient(135deg, #8b5cf6, #ec4899);
            border-radius: 16px;
            margin-bottom: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: rgba(74, 18, 89, 0.25);
        }

        .modal-name {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 12px;
        }

        .modal-description {
            font-size: 14px;
            color: #F699CD;
            margin-bottom: 20px;
            line-height: 1.6;
        }

        .modal-price {
            font-size: 28px;
            font-weight: 700;
            color: #ffd700;
            margin-bottom: 24px;
        }

        .modal-button {
            width: 100%;
            background: rgba(255, 215, 0, 0.2);
            border: 1px solid rgba(255, 215, 0, 0.5);
            color: #ffd700;
            padding: 12px 24px;
            border-radius: 50px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: block;
            text-align: center;
        }

        .modal-button:hover {
            background: rgba(255, 215, 0, 0.3);
            border-color: rgba(255, 215, 0, 0.8);
            transform: scale(1.05);
        }

        .modal-button:active {
            transform: scale(0.98);
        }

        /* ===== BOTTOM CONTROLS ===== */
        .bottom-controls {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 40px;
            align-items: center;
            z-index: 100;
        }

        .scroll-button {
            background: rgba(74, 18, 89, 0.06);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(74, 18, 89, 0.12);
            border-radius: 50px;
            padding: 12px 24px;
            color: #F699CD;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Quicksand', sans-serif;
            letter-spacing: 0.5px;
            position: relative;
            overflow: hidden;
        }

        .scroll-button::after {
            content: '↓';
            position: absolute;
            right: 10px;
            animation: chevronBounce 1.5s ease-in-out infinite;
        }

        @keyframes chevronBounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(4px); }
        }

        .scroll-button:hover {
            color: #4A1259;
            border-color: rgba(74, 18, 89, 0.25);
            transform: scale(1.08);
        }

        .scroll-button:active {
            transform: scale(0.96);
        }

        /* ===== MUSIC PLAYER ===== */
        .music-player {
            background: rgba(74, 18, 89, 0.08);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(74, 18, 89, 0.12);
            border-radius: 50px;
            padding: 8px 20px;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .now-playing {
            font-size: 11px;
            color: #F699CD;
            max-width: 140px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            font-family: 'Quicksand', sans-serif;
            font-weight: 500;
        }

        .player-controls {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .player-btn {
            background: rgba(74, 18, 89, 0.12);
            border: none;
            border-radius: 50%;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .player-btn:hover {
            background: rgba(246, 153, 205, 0.3);
            transform: scale(1.1);
        }

        .player-btn:active {
            transform: scale(0.9);
        }

        .player-btn svg {
            width: 14px;
            height: 14px;
            fill: #4A1259;
            stroke: #4A1259;
            stroke-width: 2;
        }

        .volume-slider {
            -webkit-appearance: none;
            appearance: none;
            width: 80px;
            height: 4px;
            background: rgba(0, 0, 0, 0.15);
            border-radius: 2px;
            outline: none;
            cursor: pointer;
        }

        .volume-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #F699CD;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .volume-slider::-webkit-slider-thumb:hover {
            transform: scale(1.3);
            box-shadow: 0 0 8px rgba(246, 153, 205, 0.6);
        }

        .volume-slider::-moz-range-thumb {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #F699CD;
            cursor: pointer;
            border: none;
            transition: all 0.2s ease;
        }

        .volume-slider::-moz-range-thumb:hover {
            transform: scale(1.3);
            box-shadow: 0 0 8px rgba(246, 153, 205, 0.6);
        }

        /* ===== THEME TOGGLE ===== */
        .theme-toggle {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: rgba(74, 18, 89, 0.06);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(74, 18, 89, 0.12);
            border-radius: 50%;
            width: 48px;
            height: 48px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            z-index: 100;
        }

        .theme-toggle:hover {
            border-color: rgba(74, 18, 89, 0.25);
            transform: scale(1.1) rotate(20deg);
        }

        .theme-toggle:active {
            transform: scale(0.95);
        }

        .theme-toggle svg {
            width: 20px;
            height: 20px;
            stroke: #888888;
            fill: none;
            stroke-width: 2;
            transition: stroke 0.3s ease;
        }

        .theme-toggle:hover svg {
            stroke: #4A1259;
        }

        /* ===== RESPONSIVE ===== */
        @media (max-width: 768px) {
            .header, .nav-container {
                position: relative;
                top: auto;
                left: auto;
                right: auto;
                margin-bottom: 20px;
            }

            .container {
                padding-top: 0;
            }

            .home-content, .thoughts-content, .things-content, .research-content, .moodboard-content {
                padding: 40px 20px 20px;
            }

            .home-page .quote-section {
                padding: 40px 20px;
            }

            .home-page .quote-section::before {
                font-size: 120px;
                letter-spacing: 10px;
            }

            .quote-text {
                font-size: 28px;
            }

            .cards-grid {
                grid-template-columns: 1fr;
                gap: 30px;
            }

            .card-number {
                font-size: 60px;
            }

            .thoughts-grid, .items-grid, .research-grid {
                grid-template-columns: 1fr;
            }

            .bubbles-container {
                height: 1200px;
            }

            .modal {
                padding: 30px;
            }

            .bottom-controls {
                flex-direction: column;
                gap: 20px;
                bottom: 100px;
            }

            .cursor-trail {
                display: none;
            }
        }
    </style>
</head>
<body>
    <!-- ============================================
         CUSTOMIZE YOUR SITE HERE - EASY EDIT ZONE
         ============================================ -->
    <script>
        // CONFIGURATION OBJECT - Edit these values to customize your site
        const CONFIG = {
            // Site basic info
            siteName: "My Space",
            tagline: "a home for the mind",

            // Color scheme
            colors: {
                background: "#FDE8F0",
                text: "#4A1259",
                accent: "#F699CD",
                cardBackground: "#FFF0F7",
            },

            // Font families (using Google Fonts)
            fonts: {
                heading: "'Playfair Display', serif",
                body: "'Quicksand', sans-serif",
            },

            // Quotes for each page
            quotes: {
                home: {
                    text: "The mind is everything. What you think, you become.",
                    author: "Buddha"
                },
                moodboard: {
                    text: "Jewelry and charms are the poetry of beauty—small moments of brilliance we carry with us.",
                    author: "Design Philosophy"
                },
                thingsIBuy: {
                    text: "We collect moments, not things. Each piece tells a story.",
                    author: "Curator's Wisdom"
                },
                research: {
                    text: "The intersection of art and craft reveals timeless truths.",
                    author: "Creative Discovery"
                },
                thoughts: {
                    text: "A thought preserved is a moment crystallized forever.",
                    author: "Reflections"
                }
            },

            // MUSIC PLAYLIST - Add your husband's tracks here!
            // For each song, provide:
            //   title: the song name that shows in the player
            //   artist: the artist name
            //   src: the URL or file path to the audio file
            //        (supports .mp3, .wav, .ogg, .m4a)
            //        You can use local files like "music/song.mp3"
            //        or links from SoundCloud, etc.
            music: [
                { title: "First Track", artist: "Your Husband's Name", src: "" },
                { title: "Second Track", artist: "Your Husband's Name", src: "" },
                { title: "Third Track", artist: "Your Husband's Name", src: "" },
            ],

            // Navigation tabs (order matters)
            navTabs: ["Home", "Thoughts", "Shop", "Moodboard", "Research"],

            // PRODUCTS - The main shop items (for Moodboard page)
            // These appear as floating bubbles
            products: [
                {
                    name: "Crystal Butterfly Charm",
                    price: "$12",
                    description: "Delicate crystalline butterfly perfect for nail art or jewelry. Catches light beautifully.",
                    link: "#",
                    category: "nail-charm"
                },
                {
                    name: "Gold Moon Ring",
                    price: "$28",
                    description: "Elegant crescent moon design in polished gold. A celestial statement piece.",
                    link: "#",
                    category: "jewelry"
                },
                {
                    name: "Rose Quartz Pendant",
                    price: "$18",
                    description: "Soft pink rose quartz set in silver. Brings calm and love energy.",
                    link: "#",
                    category: "jewelry"
                },
                {
                    name: "Star Burst Nail Charm",
                    price: "$10",
                    description: "Vibrant multi-pointed star charm. Perfect for festival nails.",
                    link: "#",
                    category: "nail-charm"
                },
                {
                    name: "Amethyst Crown Ring",
                    price: "$35",
                    description: "Regal amethyst gemstone in ornate crown setting. A luxury piece.",
                    link: "#",
                    category: "jewelry"
                },
                {
                    name: "Minimal Gold Bar Charm",
                    price: "$8",
                    description: "Clean, sleek gold bar design. Perfect with any nail look.",
                    link: "#",
                    category: "nail-charm"
                },
                {
                    name: "Moonstone Trio Charm",
                    price: "$15",
                    description: "Three delicate moonstones arranged in a triangle. Ethereal and modern.",
                    link: "#",
                    category: "nail-charm"
                },
                {
                    name: "Pearl Cluster Ring",
                    price: "$32",
                    description: "Vintage-inspired cluster of freshwater pearls. Timeless elegance.",
                    link: "#",
                    category: "jewelry"
                },
                {
                    name: "Opal Leaf Charm",
                    price: "$14",
                    description: "Iridescent opal carved into a delicate leaf shape.",
                    link: "#",
                    category: "nail-charm"
                },
                {
                    name: "Diamond Mini Stud",
                    price: "$22",
                    description: "Tiny diamond-like CZ stud. Perfect for subtle sparkle.",
                    link: "#",
                    category: "jewelry"
                },
                {
                    name: "Turquoise Feather Charm",
                    price: "$16",
                    description: "Bright turquoise feather design. Bohemian and eye-catching.",
                    link: "#",
                    category: "nail-charm"
                },
                {
                    name: "Sterling Silver Cross",
                    price: "$20",
                    description: "Minimalist cross charm in pure sterling silver.",
                    link: "#",
                    category: "jewelry"
                },
                {
                    name: "Sapphire Starburst Ring",
                    price: "$38",
                    description: "Deep blue sapphires arranged in a starburst pattern.",
                    link: "#",
                    category: "jewelry"
                },
                {
                    name: "Gold Filigree Charm",
                    price: "$11",
                    description: "Ornate gold filigree work. Delicate and intricate detail.",
                    link: "#",
                    category: "nail-charm"
                },
                {
                    name: "Emerald Drop Pendant",
                    price: "$25",
                    description: "Rich emerald green in a simple drop setting. Sophisticated and bold.",
                    link: "#",
                    category: "jewelry"
                }
            ],

            // THOUGHTS - Quotes for thoughts page
            thoughts: [
                "Beauty exists in the smallest details",
                "Every piece carries intention and meaning",
                "Craft is a form of meditation",
                "We are what we adorn ourselves with",
                "Minimalism is the art of subtraction",
                "Handmade connects heart to hand",
                "Sparkle is a state of mind",
                "The best jewelry whispers, doesn't shout",
                "Quality over quantity, always",
                "Each scratch tells a story",
                "Tradition meets innovation",
                "Adornment is self-expression"
            ],

            // HOME PAGE CARDS
            homeCards: [
                {
                    title: "Curated Collection",
                    subtitle: "Hand-selected charms and jewelry that inspire",
                    image: "gradient1"
                },
                {
                    title: "Craftsmanship",
                    subtitle: "Each piece made with intention and care",
                    image: "gradient2"
                },
                {
                    title: "Personal Style",
                    subtitle: "Express yourself through adornment",
                    image: "gradient3"
                },
                {
                    title: "Timeless Beauty",
                    subtitle: "Pieces that last beyond seasons",
                    image: "gradient4"
                }
            ],

            // THINGS I BUY PAGE ITEMS
            thingsItems: [
                {
                    title: "Artisan Beads",
                    description: "Sourced from independent craftspeople worldwide",
                    link: "#"
                },
                {
                    title: "Gemstone Cutting",
                    description: "Traditional lapidary techniques",
                    link: "#"
                },
                {
                    title: "Metalworking Tools",
                    description: "Essential instruments for jewelry creation",
                    link: "#"
                },
                {
                    title: "Leather Cord",
                    description: "Premium materials for stringing",
                    link: "#"
                },
                {
                    title: "Precious Metals",
                    description: "Gold, silver, and platinum supplies",
                    link: "#"
                },
                {
                    title: "Resin & Molds",
                    description: "For creating custom charms",
                    link: "#"
                }
            ],

            // RESEARCH PAGE RESOURCES
            researchItems: [
                {
                    title: "The History of Jewelry",
                    link: "https://example.com/jewelry-history"
                },
                {
                    title: "Gemstone Properties",
                    link: "https://example.com/gemstones"
                },
                {
                    title: "Metalworking Techniques",
                    link: "https://example.com/metalworking"
                },
                {
                    title: "Design Principles",
                    link: "https://example.com/design"
                },
                {
                    title: "Sustainability in Fashion",
                    link: "https://example.com/sustainability"
                },
                {
                    title: "Color Theory & Design",
                    link: "https://example.com/color-theory"
                }
            ]
        };
    </script>

    <!-- HEADER -->
    <div class="header">
        <div class="site-logo">
            <div class="site-name" id="siteName">My Space</div>
            <div class="site-tagline" id="siteTagline">a home for the mind</div>
        </div>
    </div>

    <!-- NAVIGATION -->
    <div class="nav-container">
        <div class="nav-bar" id="navBar"></div>
    </div>

    <!-- MOUSE FOLLOW GLOW -->
    <div class="mouse-glow" id="mouseGlow"></div>

    <!-- MAIN CONTAINER -->
    <div class="container">
        <!-- HOME PAGE -->
        <div class="page home-page active" id="homePage">
            <div class="quote-section">
                <div class="quote-issue">Vol. 01 / 2026</div>
                <div class="quote-text" id="homeQuote"></div>
                <div class="quote-divider"></div>
                <div class="quote-author" id="homeQuoteAuthor"></div>
            </div>
            <div class="home-content">
                <div class="cards-grid" id="cardsScroll"></div>
            </div>
        </div>

        <!-- THOUGHTS PAGE -->
        <div class="page thoughts-page" id="thoughtsPage">
            <div class="quote-section">
                <div class="quote-text" id="thoughtsQuote"></div>
                <div class="quote-divider"></div>
                <div class="quote-author" id="thoughtsQuoteAuthor"></div>
            </div>
            <div class="thoughts-content">
                <div class="page-title">Thoughts</div>
                <div class="page-subtitle">Fragments of perspective — raw ideas, passing intuitions, and observations.</div>
                <div class="thoughts-grid" id="thoughtsGrid"></div>
            </div>
        </div>

        <!-- MOODBOARD PAGE (SHOP) -->
        <div class="page moodboard-page" id="moodboardPage">
            <div class="quote-section">
                <div class="quote-text" id="moodboardQuote"></div>
                <div class="quote-divider"></div>
                <div class="quote-author" id="moodboardQuoteAuthor"></div>
            </div>
            <div class="moodboard-content">
                <div class="page-title">Shop</div>
                <div class="page-subtitle">Curated collection of beautiful charms and jewelry pieces.</div>
                <div class="filter-bar" id="filterBar"></div>
                <div class="bubbles-container" id="bubblesContainer"></div>
            </div>
        </div>

        <!-- THINGS I BUY PAGE -->
        <div class="page things-page" id="thingsPage">
            <div class="quote-section">
                <div class="quote-text" id="thingsQuote"></div>
                <div class="quote-divider"></div>
                <div class="quote-author" id="thingsQuoteAuthor"></div>
            </div>
            <div class="things-content">
                <div class="page-title">Moodboard</div>
                <div class="page-subtitle">Curated finds and recommendations from creators and artisans.</div>
                <div class="items-grid" id="thingsGrid"></div>
            </div>
        </div>

        <!-- RESEARCH PAGE -->
        <div class="page research-page" id="researchPage">
            <div class="quote-section">
                <div class="quote-text" id="researchQuote"></div>
                <div class="quote-divider"></div>
                <div class="quote-author" id="researchQuoteAuthor"></div>
            </div>
            <div class="research-content">
                <div class="research-background" id="researchBackground">Research</div>
                <div class="research-foreground">
                    <div class="page-title">Research</div>
                    <div class="page-subtitle">Links, findings, and discoveries from the edge of technology, design, and philosophy.</div>
                    <div class="research-grid" id="researchGrid"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- MODAL -->
    <div class="modal-overlay" id="modalOverlay">
        <div class="modal" id="productModal">
            <button class="modal-close" id="modalClose">&times;</button>
            <div class="modal-image"></div>
            <div class="modal-name" id="modalName"></div>
            <div class="modal-description" id="modalDescription"></div>
            <div class="modal-price" id="modalPrice"></div>
            <a class="modal-button" id="modalButton" href="#" target="_blank">Shop Now</a>
        </div>
    </div>

    <!-- BOTTOM CONTROLS -->
    <div class="bottom-controls">
        <button class="scroll-button" id="scrollButton">scroll in calm</button>
        <!-- MUSIC PLAYER -->
        <div class="music-player" id="musicPlayer">
            <div class="now-playing" id="nowPlaying">No track loaded</div>
            <div class="player-controls">
                <button class="player-btn" id="playBtn" title="Play/Pause">
                    <svg viewBox="0 0 24 24" id="playIcon"><polygon points="5,3 19,12 5,21"></polygon></svg>
                    <svg viewBox="0 0 24 24" id="pauseIcon" style="display:none"><rect x="6" y="4" width="4" height="16"></rect><rect x="14" y="4" width="4" height="16"></rect></svg>
                </button>
                <button class="player-btn" id="skipBtn" title="Next Track">
                    <svg viewBox="0 0 24 24"><polygon points="5,4 15,12 5,20"></polygon><line x1="19" y1="5" x2="19" y2="19"></line></svg>
                </button>
                <input type="range" class="volume-slider" id="volumeSlider" min="0" max="100" value="80" title="Volume">
            </div>
        </div>
        <audio id="audioElement"></audio>
    </div>

    <!-- THEME TOGGLE -->
    <div class="theme-toggle" id="themeToggle">
        <svg viewBox="0 0 24 24">
            <circle cx="12" cy="12" r="5"></circle>
            <line x1="12" y1="1" x2="12" y2="3"></line>
            <line x1="12" y1="21" x2="12" y2="23"></line>
            <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
            <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
            <line x1="1" y1="12" x2="3" y2="12"></line>
            <line x1="21" y1="12" x2="23" y2="12"></line>
            <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
            <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
        </svg>
    </div>

    <script>
        // ============================================
        // APPLICATION STATE & INITIALIZATION
        // ============================================

        let currentPage = "Home";
        let isDarkMode = true;

        // Initialize the site
        function initializeSite() {
            updateSiteInfo();
            createNavigation();
            populateAllPages();
            setupEventListeners();
            loadBubblePositions();
            initializeCustomCursor();
            setupIntersectionObservers();
        }

        // ============================================
        // SITE INFO UPDATES
        // ============================================

        function updateSiteInfo() {
            document.getElementById("siteName").textContent = CONFIG.siteName;
            document.getElementById("siteTagline").textContent = CONFIG.tagline;
        }

        // ============================================
        // CUSTOM CURSOR TRAIL
        // ============================================

        function initializeCustomCursor() {
            if (window.matchMedia('(pointer: coarse)').matches) {
                return; // Don't use custom cursor on touch devices
            }

            let trailPositions = [];
            const mouseGlow = document.getElementById("mouseGlow");

            document.addEventListener('mousemove', (e) => {
                const x = e.clientX;
                const y = e.clientY;

                // Update glow follow
                mouseGlow.style.left = (x - 100) + 'px';
                mouseGlow.style.top = (y - 100) + 'px';
            });
        }

        // ============================================
        // INTERSECTION OBSERVER FOR ANIMATIONS
        // ============================================

        function setupIntersectionObservers() {
            const observerOptions = {
                threshold: 0.1,
                rootMargin: '0px 0px -50px 0px'
            };

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('visible');
                        observer.unobserve(entry.target);
                    }
                });
            }, observerOptions);

            // Observe card items on home page
            document.querySelectorAll('.card-item').forEach(card => {
                observer.observe(card);
            });

            // Thought cards and other elements already have staggered animations via CSS
        }

        // ============================================
        // NAVIGATION SETUP
        // ============================================

        function createNavigation() {
            const navBar = document.getElementById("navBar");
            navBar.innerHTML = "";

            const navIcons = {
                Home: '<svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg>',
                Thoughts: '<svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path><circle cx="9" cy="10" r="1"></circle><circle cx="12" cy="10" r="1"></circle><circle cx="15" cy="10" r="1"></circle></svg>',
                Shop: '<svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="9" cy="21" r="1"></circle><circle cx="20" cy="21" r="1"></circle><path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path></svg>',
                Moodboard: '<svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path></svg>',
                Research: '<svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"></circle><path d="m21 21-4.35-4.35"></path><path d="M11 8v6M8 11h6"></path></svg>'
            };

            CONFIG.navTabs.forEach((tab) => {
                const btn = document.createElement("button");
                btn.className = "nav-btn" + (tab === "Home" ? " active" : "");
                btn.innerHTML = `${navIcons[tab] || ''}<span class="nav-text">${tab}</span>`;
                btn.onclick = () => switchPage(tab);
                navBar.appendChild(btn);
            });
        }

        function switchPage(pageName) {
            // Fade out old page
            document.querySelectorAll(".page").forEach((page) => {
                page.classList.remove("active");
            });

            // Update nav buttons
            document.querySelectorAll(".nav-btn").forEach((btn) => {
                btn.classList.remove("active");
                const btnText = btn.querySelector(".nav-text")?.textContent || btn.textContent;
                if (btnText === pageName) {
                    btn.classList.add("active");
                }
            });

            // Show selected page with fade in
            const pageMap = {
                Home: "homePage",
                Thoughts: "thoughtsPage",
                Shop: "moodboardPage",
                Moodboard: "thingsPage",
                Research: "researchPage"
            };

            const pageId = pageMap[pageName];
            if (pageId) {
                const pageEl = document.getElementById(pageId);
                pageEl.classList.add("active");
                currentPage = pageName;

                // Reinitialize observers on new page
                setupIntersectionObservers();

                // Add stagger delay to thought cards on thoughts page
                if (pageName === "Thoughts") {
                    document.querySelectorAll(".thought-card").forEach((card, index) => {
                        card.style.animationDelay = (index * 0.08) + 's';
                    });
                }

                // Add stagger delay to item cards on things page
                if (pageName === "Moodboard") {
                    document.querySelectorAll(".item-card").forEach((card, index) => {
                        card.style.animationDelay = (index * 0.08) + 's';
                    });
                }

                // Add stagger delay to research cards
                if (pageName === "Research") {
                    document.querySelectorAll(".research-card").forEach((card, index) => {
                        card.style.animationDelay = (index * 0.08) + 's';
                    });
                }

                window.scrollTo(0, 0);
            }
        }

        // ============================================
        // PAGE POPULATION
        // ============================================

        function populateAllPages() {
            populateHomeCard();
            populateThoughtsPage();
            populateMoodboardPage();
            populateThingsPage();
            populateResearchPage();
            populateQuotes();
        }

        function populateQuotes() {
            // Home quote - with word reveal animation
            const homeQuoteEl = document.getElementById("homeQuote");
            homeQuoteEl.innerHTML = CONFIG.quotes.home.text.split(' ').map((word, index) => {
                return `<span class="quote-word" style="animation-delay: ${index * 0.1}s">${word}</span>`;
            }).join(' ');
            document.getElementById("homeQuoteAuthor").textContent = CONFIG.quotes.home.author;

            // Thoughts quote
            document.getElementById("thoughtsQuote").textContent = CONFIG.quotes.thoughts.text;
            document.getElementById("thoughtsQuoteAuthor").textContent = CONFIG.quotes.thoughts.author;

            // Moodboard quote
            document.getElementById("moodboardQuote").textContent = CONFIG.quotes.moodboard.text;
            document.getElementById("moodboardQuoteAuthor").textContent = CONFIG.quotes.moodboard.author;

            // Things quote
            document.getElementById("thingsQuote").textContent = CONFIG.quotes.thingsIBuy.text;
            document.getElementById("thingsQuoteAuthor").textContent = CONFIG.quotes.thingsIBuy.author;

            // Research quote
            document.getElementById("researchQuote").textContent = CONFIG.quotes.research.text;
            document.getElementById("researchQuoteAuthor").textContent = CONFIG.quotes.research.author;
        }

        function populateHomeCard() {
            const cardsGrid = document.getElementById("cardsScroll");
            cardsGrid.innerHTML = "";

            CONFIG.homeCards.forEach((card, index) => {
                const glamClass = "glam-" + ((index % 5) + 1);
                const cardItem = document.createElement("div");
                cardItem.className = "card-item";
                cardItem.innerHTML = `
                    <div class="card-number">${index + 1}</div>
                    <div class="card-content">
                        <div class="card-image ${glamClass}">${card.image && card.image !== 'gradient1' ? '<img src="' + card.image + '" style="width:100%;height:100%;object-fit:cover;border-radius:20px;">' : 'your image here'}</div>
                        <div class="card-title">${card.title}</div>
                        <div class="card-subtitle">${card.subtitle}</div>
                    </div>
                `;
                cardsGrid.appendChild(cardItem);
            });

            // Add sparkle elements to home page quote section for 80s glam
            const homeQuoteSection = document.querySelector(".home-page .quote-section");
            if (homeQuoteSection) {
                for (let i = 0; i < 25; i++) {
                    const sparkle = document.createElement("div");
                    sparkle.className = "sparkle" + (Math.random() > 0.7 ? " gold" : "");
                    sparkle.style.left = Math.random() * 100 + "%";
                    sparkle.style.top = Math.random() * 100 + "%";
                    sparkle.style.animationDelay = (Math.random() * 4) + "s";
                    sparkle.style.animationDuration = (2 + Math.random() * 3) + "s";
                    sparkle.style.width = (2 + Math.random() * 6) + "px";
                    sparkle.style.height = sparkle.style.width;
                    homeQuoteSection.appendChild(sparkle);
                }
            }

            // Set up intersection observer for cards after a brief delay
            setTimeout(() => {
                setupIntersectionObservers();
            }, 100);
        }

        function populateThoughtsPage() {
            const thoughtsGrid = document.getElementById("thoughtsGrid");
            thoughtsGrid.innerHTML = "";

            CONFIG.thoughts.forEach((thought, index) => {
                const card = document.createElement("div");
                card.className = "thought-card";
                card.innerHTML = `<div class="thought-text">"${thought}"</div>`;
                card.style.animationDelay = (index * 0.08) + 's';
                thoughtsGrid.appendChild(card);
            });
        }

        function populateMoodboardPage() {
            const bubblesContainer = document.getElementById("bubblesContainer");
            bubblesContainer.innerHTML = "";

            CONFIG.products.forEach((product, index) => {
                const bubble = document.createElement("div");
                const bubbleClass = product.category === "jewelry" ? "bubble-jewelry" : "bubble-charm";
                bubble.className = `bubble float${(index % 4) + 1} ${bubbleClass}`;
                bubble.setAttribute("data-category", product.category);
                bubble.innerHTML = `
                    <div class="bubble-content">
                        <div class="bubble-name">${product.name}</div>
                        <div class="bubble-price">${product.price}</div>
                    </div>
                `;
                bubble.onclick = () => openProductModal(index);
                bubblesContainer.appendChild(bubble);
            });

            // Create filter bar
            createFilterBar();
        }

        function createFilterBar() {
            const filterBar = document.getElementById("filterBar");
            filterBar.innerHTML = "";

            const filters = [
                { id: "all", label: "All", icon: '<svg class="filter-icon" viewBox="0 0 24 24" fill="currentColor"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></svg>' },
                { id: "nail-charm", label: "Nail Charms", icon: '<svg class="filter-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 7v13a1 1 0 0 0 1 1h4V7H4a1 1 0 0 0-1 1z"></path><path d="M8 7v14h8V7"></path><path d="M16 7v14h4a1 1 0 0 0 1-1V7"></path><path d="M3 3h18"></path></svg>' },
                { id: "jewelry", label: "Jewelry", icon: '<svg class="filter-icon" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2L9 6H4v12h16V6h-5l-3-4z" opacity="0.3"></path><circle cx="12" cy="12" r="4" fill="currentColor"></circle></svg>' }
            ];

            filters.forEach(filter => {
                const btn = document.createElement("button");
                btn.className = `filter-btn ${filter.id === "all" ? "active" : ""}`;
                btn.setAttribute("data-filter", filter.id);
                btn.innerHTML = `${filter.icon}<span>${filter.label}</span>`;
                btn.onclick = () => filterBubbles(filter.id);
                filterBar.appendChild(btn);
            });
        }

        function filterBubbles(category) {
            const bubbles = document.querySelectorAll(".bubble");
            const filterBtns = document.querySelectorAll(".filter-btn");

            // Update active button
            filterBtns.forEach(btn => {
                btn.classList.remove("active");
                if (btn.getAttribute("data-filter") === category) {
                    btn.classList.add("active");
                }
            });

            // Filter bubbles with animation
            bubbles.forEach(bubble => {
                const isCharm = bubble.getAttribute("data-category") === "nail-charm";
                const isJewelry = bubble.getAttribute("data-category") === "jewelry";
                const shouldShow = category === "all" || (category === "nail-charm" && isCharm) || (category === "jewelry" && isJewelry);

                if (shouldShow) {
                    if (bubble.classList.contains("hidden")) {
                        bubble.classList.remove("hidden");
                        bubble.classList.remove("pop-away", "glimmer-away");
                        bubble.classList.add("appear");

                        // Remove appear class after animation
                        setTimeout(() => {
                            bubble.classList.remove("appear");
                        }, 500);
                    }
                } else {
                    if (!bubble.classList.contains("hidden")) {
                        // Add exit animation based on type
                        if (isCharm) {
                            bubble.classList.add("pop-away");
                        } else {
                            bubble.classList.add("glimmer-away");
                        }

                        // Hide after animation completes
                        setTimeout(() => {
                            bubble.classList.add("hidden");
                            bubble.classList.remove("pop-away", "glimmer-away");
                        }, isCharm ? 400 : 600);
                    }
                }
            });
        }

        function populateThingsPage() {
            const thingsGrid = document.getElementById("thingsGrid");
            thingsGrid.innerHTML = "";

            CONFIG.thingsItems.forEach((item, index) => {
                const card = document.createElement("div");
                card.className = "item-card";
                card.style.animationDelay = (index * 0.08) + 's';
                card.innerHTML = `
                    <div class="item-image">Curated Item</div>
                    <div class="item-info">
                        <div class="item-title">${item.title}</div>
                        <div class="item-description">${item.description}</div>
                    </div>
                `;
                thingsGrid.appendChild(card);
            });
        }

        function populateResearchPage() {
            const researchGrid = document.getElementById("researchGrid");
            researchGrid.innerHTML = "";

            CONFIG.researchItems.forEach((item, index) => {
                const card = document.createElement("a");
                card.href = item.link;
                card.target = "_blank";
                card.className = "research-card";
                card.style.animationDelay = (index * 0.08) + 's';
                card.innerHTML = `
                    <div class="research-image">Research Resource</div>
                    <div class="research-info">
                        <div class="research-title">${item.title}</div>
                        <div class="research-link">${new URL(item.link).hostname}</div>
                    </div>
                `;
                researchGrid.appendChild(card);
            });
        }

        // ============================================
        // CANVAS DIAMOND PATTERN GENERATOR
        // ============================================

        function createDiamondPattern(size) {
            const canvas = document.createElement('canvas');
            canvas.width = size;
            canvas.height = size;
            const ctx = canvas.getContext('2d');
            const cx = size / 2;
            const cy = size / 2;
            const outerR = size * 0.48;

            // Clip to circle
            ctx.beginPath();
            ctx.arc(cx, cy, outerR, 0, Math.PI * 2);
            ctx.clip();

            // Fill dark base
            ctx.fillStyle = '#0d1628';
            ctx.fillRect(0, 0, size, size);

            function polar(angleDeg, r) {
                const rad = angleDeg * Math.PI / 180;
                return [cx + r * Math.cos(rad), cy - r * Math.sin(rad)];
            }

            function drawPoly(points, color) {
                ctx.beginPath();
                ctx.moveTo(points[0][0], points[0][1]);
                for (let i = 1; i < points.length; i++) {
                    ctx.lineTo(points[i][0], points[i][1]);
                }
                ctx.closePath();
                ctx.fillStyle = color;
                ctx.fill();
                ctx.strokeStyle = 'rgba(200,215,240,0.12)';
                ctx.lineWidth = 0.5;
                ctx.stroke();
            }

            // Concentric ring radii
            const tableR = size * 0.14;
            const starR = size * 0.28;
            const bezelR = size * 0.38;
            const girdleR = outerR;

            // Generate ring points
            function ringPoints(n, r, offsetDeg) {
                const pts = [];
                for (let i = 0; i < n; i++) pts.push(polar(offsetDeg + i * (360 / n), r));
                return pts;
            }

            const tPts = ringPoints(8, tableR, 0);         // table vertices
            const sPts = ringPoints(8, starR, 22.5);        // star tips (offset 22.5)
            const bPts = ringPoints(16, bezelR, 0);          // bezel midpoints
            const gPts = ringPoints(16, girdleR, 11.25);    // girdle points

            // Facet colors: realistic diamond contrast
            const dark = ['#080e20','#0a1228','#0c1530','#0e1832','#091125','#0b1329'];
            const bright = ['#eaf0ff','#f5f8ff','#ffffff','#e0eafc','#f0f5ff','#dce8fa','#ffffff','#e8f0ff'];
            const mid = ['#7a8caa','#8898b5','#95a8c5','#6d80a0','#a0b2cc','#8595b0'];
            const iceBlue = ['#c5d5ef','#b8cce8','#d0ddf0','#afc2e0','#c0d0eb'];

            // Draw table (center octagon) - bright white/ice
            drawPoly(tPts, '#e8f0ff');

            // Star facets: 8 triangles from table edges to star tips
            for (let i = 0; i < 8; i++) {
                const t1 = tPts[i];
                const t2 = tPts[(i + 1) % 8];
                const s = sPts[i];
                // Alternate: dark arrows and bright facets
                const color = (i % 2 === 0)
                    ? dark[i % dark.length]
                    : bright[i % bright.length];
                drawPoly([t1, t2, s], color);
            }

            // Crown/bezel facets: kite shapes from star tips to bezel ring
            for (let i = 0; i < 8; i++) {
                const s = sPts[i];
                const b1 = bPts[i * 2];       // bezel point at table vertex angle
                const b2 = bPts[i * 2 + 1];   // bezel point at star tip angle
                const b3 = bPts[(i * 2 + 2) % 16]; // next bezel point

                // Left kite half
                const colA = (i % 2 === 0)
                    ? bright[(i + 2) % bright.length]
                    : mid[i % mid.length];
                drawPoly([tPts[i], s, b2, b1], colA);

                // Right kite half
                const colB = (i % 2 === 0)
                    ? iceBlue[i % iceBlue.length]
                    : bright[(i + 3) % bright.length];
                drawPoly([tPts[(i + 1) % 8], s, b2, b3], colB);
            }

            // Upper girdle facets: thin triangles from bezel to girdle
            for (let i = 0; i < 16; i++) {
                const bp = bPts[i];
                const g1 = gPts[i];
                const g2 = gPts[(i + 1) % 16];

                const color = (i % 3 === 0)
                    ? dark[i % dark.length]
                    : (i % 3 === 1)
                        ? bright[i % bright.length]
                        : mid[i % mid.length];
                drawPoly([bp, g1, g2], color);

                // Fill between girdle points and next bezel
                const bp2 = bPts[(i + 1) % 16];
                const col2 = (i % 3 === 0)
                    ? bright[(i + 1) % bright.length]
                    : (i % 3 === 1)
                        ? iceBlue[i % iceBlue.length]
                        : dark[(i + 1) % dark.length];
                drawPoly([bp, bp2, g2], col2);
            }

            // Redraw table on top (brighter, clean)
            drawPoly(tPts, 'rgba(235, 242, 255, 0.85)');

            // Specular highlight (upper-left bright spot)
            const specGrad = ctx.createRadialGradient(
                cx - size * 0.1, cy - size * 0.1, 0,
                cx, cy, outerR
            );
            specGrad.addColorStop(0, 'rgba(255,255,255,0.35)');
            specGrad.addColorStop(0.2, 'rgba(255,255,255,0.12)');
            specGrad.addColorStop(0.5, 'transparent');
            ctx.fillStyle = specGrad;
            ctx.beginPath();
            ctx.arc(cx, cy, outerR, 0, Math.PI * 2);
            ctx.fill();

            return canvas.toDataURL();
        }

        // Cache the diamond pattern
        let diamondPatternURL = null;

        function getDiamondPattern() {
            if (!diamondPatternURL) {
                diamondPatternURL = createDiamondPattern(300);
            }
            return diamondPatternURL;
        }

        // ============================================
        // BUBBLE POSITIONING (SCATTERED LAYOUT)
        // ============================================

        function loadBubblePositions() {
            const container = document.getElementById("bubblesContainer");
            if (!container) return;
            const bubbles = container.querySelectorAll(".bubble");

            // Predefined positions and sizes for a nice scattered layout
            const positions = [
                { x: "10%", y: "5%", size: 80 },
                { x: "25%", y: "20%", size: 120 },
                { x: "50%", y: "8%", size: 100 },
                { x: "70%", y: "30%", size: 140 },
                { x: "85%", y: "10%", size: 90 },
                { x: "15%", y: "45%", size: 110 },
                { x: "40%", y: "50%", size: 130 },
                { x: "75%", y: "55%", size: 100 },
                { x: "20%", y: "70%", size: 95 },
                { x: "55%", y: "70%", size: 125 },
                { x: "80%", y: "75%", size: 85 },
                { x: "35%", y: "25%", size: 105 },
                { x: "60%", y: "35%", size: 115 },
                { x: "10%", y: "85%", size: 100 },
                { x: "65%", y: "15%", size: 110 }
            ];

            // Get the diamond pattern for jewelry bubbles
            const diamondBG = getDiamondPattern();

            bubbles.forEach((bubble, index) => {
                const pos = positions[index % positions.length];
                bubble.style.left = pos.x;
                bubble.style.top = pos.y;
                bubble.style.width = pos.size + "px";
                bubble.style.height = pos.size + "px";

                // Apply canvas diamond pattern to jewelry bubbles
                if (bubble.classList.contains('bubble-jewelry')) {
                    bubble.style.backgroundImage = 'url(' + diamondBG + ')';
                    bubble.style.backgroundSize = 'cover';
                    bubble.style.backgroundPosition = 'center';
                }
            });

            // Initialize bubble physics
            initBubblePhysics();
        }

        // ============================================
        // BUBBLE PHYSICS & INTERACTION
        // ============================================

        let mouseX = 0, mouseY = 0;
        let isDragging = false;
        let dragBubble = null;
        let bubblePhysics = [];

        document.addEventListener('mousemove', (e) => {
            mouseX = e.clientX;
            mouseY = e.clientY;
        });

        let physicsRunning = false;

        function initBubblePhysics() {
            const bubblesContainer = document.getElementById("bubblesContainer");
            if (!bubblesContainer) return;
            const bubbles = bubblesContainer.querySelectorAll('.bubble');
            bubblePhysics = [];

            bubbles.forEach(bubble => {
                const physics = {
                    el: bubble,
                    offsetX: 0,
                    offsetY: 0,
                    vx: 0,
                    vy: 0
                };

                bubble.addEventListener('mousedown', (e) => {
                    e.preventDefault();
                    e.stopPropagation();
                    isDragging = true;
                    dragBubble = physics;
                    bubble.style.zIndex = '10';
                    bubble.style.cursor = 'grabbing';
                });

                bubble.addEventListener('touchstart', (e) => {
                    isDragging = true;
                    dragBubble = physics;
                    bubble.style.zIndex = '10';
                    const touch = e.touches[0];
                    mouseX = touch.clientX;
                    mouseY = touch.clientY;
                }, { passive: true });

                bubblePhysics.push(physics);
            });

            document.addEventListener('mouseup', releaseBubble);
            document.addEventListener('touchend', releaseBubble);

            document.addEventListener('touchmove', (e) => {
                if (isDragging && e.touches[0]) {
                    mouseX = e.touches[0].clientX;
                    mouseY = e.touches[0].clientY;
                }
            }, { passive: true });

            function releaseBubble() {
                if (dragBubble) {
                    dragBubble.el.style.zIndex = '';
                    dragBubble.el.style.cursor = 'pointer';
                }
                isDragging = false;
                dragBubble = null;
            }

            if (!physicsRunning) {
                physicsRunning = true;
                requestAnimationFrame(updatePhysics);
            }
        }

        function updatePhysics() {
            const RETURN_FORCE = 0.02;
            const FRICTION = 0.88;

            bubblePhysics.forEach(p => {
                const rect = p.el.getBoundingClientRect();
                if (rect.width === 0) return;

                const centerX = rect.left + rect.width / 2;
                const centerY = rect.top + rect.height / 2;

                if (p === dragBubble && isDragging) {
                    // Follow cursor when dragging
                    p.vx = (mouseX - centerX) * 0.2;
                    p.vy = (mouseY - centerY) * 0.2;
                } else {
                    // Gently drift back to home position
                    p.vx += (0 - p.offsetX) * RETURN_FORCE;
                    p.vy += (0 - p.offsetY) * RETURN_FORCE;
                }

                p.vx *= FRICTION;
                p.vy *= FRICTION;

                p.offsetX += p.vx;
                p.offsetY += p.vy;

                p.offsetX = Math.max(-200, Math.min(200, p.offsetX));
                p.offsetY = Math.max(-200, Math.min(200, p.offsetY));

                p.el.style.marginLeft = p.offsetX + "px";
                p.el.style.marginTop = p.offsetY + "px";
            });

            requestAnimationFrame(updatePhysics);
        }

        // ============================================
        // PRODUCT MODAL
        // ============================================

        function openProductModal(index) {
            const product = CONFIG.products[index];
            if (!product) return;

            document.getElementById("modalName").textContent = product.name;
            document.getElementById("modalDescription").textContent = product.description;
            document.getElementById("modalPrice").textContent = product.price;
            document.getElementById("modalButton").href = product.link;
            document.getElementById("modalOverlay").classList.add("active");
        }

        function closeProductModal() {
            document.getElementById("modalOverlay").classList.remove("active");
        }

        // ============================================
        // EVENT LISTENERS
        // ============================================

        function setupEventListeners() {
            // Modal close button
            document.getElementById("modalClose").onclick = closeProductModal;

            // Modal overlay click to close
            document.getElementById("modalOverlay").onclick = (e) => {
                if (e.target.id === "modalOverlay") {
                    closeProductModal();
                }
            };

            // Scroll button
            document.getElementById("scrollButton").onclick = () => {
                window.scrollBy({ top: window.innerHeight * 0.5, behavior: "smooth" });
            };

            // Theme toggle
            document.getElementById("themeToggle").onclick = toggleTheme;

            // Nav collapse on scroll
            window.addEventListener("scroll", () => {
                const navBar = document.getElementById("navBar");
                if (window.scrollY > 100) {
                    navBar.classList.add("collapsed");
                } else {
                    navBar.classList.remove("collapsed");
                }
            });

            // Keyboard navigation
            document.addEventListener("keydown", (e) => {
                if (e.key === "Escape") closeProductModal();
                if (e.key === "ArrowRight") {
                    const currentIndex = CONFIG.navTabs.indexOf(currentPage);
                    if (currentIndex < CONFIG.navTabs.length - 1) {
                        switchPage(CONFIG.navTabs[currentIndex + 1]);
                    }
                }
                if (e.key === "ArrowLeft") {
                    const currentIndex = CONFIG.navTabs.indexOf(currentPage);
                    if (currentIndex > 0) {
                        switchPage(CONFIG.navTabs[currentIndex - 1]);
                    }
                }
            });
        }

        // ============================================
        // THEME TOGGLE
        // ============================================

        function toggleTheme() {
            isDarkMode = !isDarkMode;
            const root = document.documentElement;

            if (isDarkMode) {
                root.style.setProperty("--bg-color", "#2A0E35");
                root.style.setProperty("--text-color", "#FDE8F0");
                document.body.style.backgroundColor = "#2A0E35";
                document.body.style.color = "#FDE8F0";
            } else {
                root.style.setProperty("--bg-color", "#FDE8F0");
                root.style.setProperty("--text-color", "#4A1259");
                document.body.style.backgroundColor = "#FDE8F0";
                document.body.style.color = "#4A1259";
            }
        }

        // ============================================
        // MUSIC PLAYER
        // ============================================
        let currentTrack = 0;
        let isPlaying = false;
        const audio = document.getElementById("audioElement");
        const playBtn = document.getElementById("playBtn");
        const skipBtn = document.getElementById("skipBtn");
        const volumeSlider = document.getElementById("volumeSlider");
        const nowPlaying = document.getElementById("nowPlaying");
        const playIcon = document.getElementById("playIcon");
        const pauseIcon = document.getElementById("pauseIcon");

        function loadTrack(index) {
            const tracks = CONFIG.music;
            if (!tracks || tracks.length === 0) {
                nowPlaying.textContent = "Add tracks in CONFIG";
                return;
            }
            currentTrack = index % tracks.length;
            const track = tracks[currentTrack];
            if (track.src) {
                audio.src = track.src;
                nowPlaying.textContent = track.title + " — " + track.artist;
            } else {
                nowPlaying.textContent = track.title + " (no file yet)";
            }
        }

        function togglePlay() {
            const tracks = CONFIG.music;
            if (!tracks || tracks.length === 0 || !tracks[currentTrack].src) {
                nowPlaying.textContent = "Add an audio file URL in CONFIG first!";
                return;
            }
            if (isPlaying) {
                audio.pause();
                playIcon.style.display = "block";
                pauseIcon.style.display = "none";
            } else {
                audio.play().catch(function() {
                    nowPlaying.textContent = "Could not play — check file path";
                });
                playIcon.style.display = "none";
                pauseIcon.style.display = "block";
            }
            isPlaying = !isPlaying;
        }

        function skipTrack() {
            const wasPlaying = isPlaying;
            if (isPlaying) { audio.pause(); isPlaying = false; }
            loadTrack(currentTrack + 1);
            if (wasPlaying && CONFIG.music[currentTrack].src) {
                audio.play();
                isPlaying = true;
                playIcon.style.display = "none";
                pauseIcon.style.display = "block";
            }
        }

        // When a track ends, auto-play next
        audio.addEventListener("ended", function() {
            skipTrack();
        });

        playBtn.addEventListener("click", togglePlay);
        skipBtn.addEventListener("click", skipTrack);
        volumeSlider.addEventListener("input", function() {
            audio.volume = this.value / 100;
        });
        audio.volume = 0.8;

        // Load first track on startup
        function initializeMusic() {
            loadTrack(0);
        }

        // ============================================
        // INITIALIZE ON LOAD
        // ============================================

        function fullInit() { initializeSite(); initializeMusic(); }
        document.addEventListener("DOMContentLoaded", fullInit);

        // Fallback initialization in case DOMContentLoaded already fired
        if (document.readyState !== "loading") {
            fullInit();
        }
    </script>
</body>
</html>
